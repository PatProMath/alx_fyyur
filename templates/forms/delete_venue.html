{% extends 'layouts/main.html' %}
{% block title %}Delete Venue{% endblock %}
{% block content %}
  <div class="form-wrapper">
    <form class="form" method="post" action="/venues/{{venue.id}}/delete">
      {{ form.hidden_tag() }}
      <h3 class="form-heading"> Delete Venue  <em>{{ venue.name }}</em> ? <a href="{{ url_for('index') }}" title="Back to homepage"><i class="fa fa-home pull-right"></i></a></h3>

      <br>
      <br>
		  <small>To confirm your delete, click the button below!</small>
      {{ form.delete(class_ = 'btn btn-primary btn-lg btn-block', id="deleteVenue", value="Delete Venue") }}
     
    </form>
  </div>

  <script>
    venue_id = venue.id
    const btn = document.getElementById('deleteVenue');
    btn.onclick = function(e) {
        venue_id = e.target.dataset['id'];
        console.log(venue_id)
        let r = confirm("Are you sure you want to delete this venue?");
        if (r == true) {
            fetch('/venues/' + venue_id + '/delete', {
                method: 'DELETE'
            })
        }
    }

</script>
{% endblock %}
